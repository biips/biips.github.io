<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>biips_model. Rbiips 0.10.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">Rbiips 0.10.0</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Create a biips model object described in BUGS language.</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>biips_model(file, data&nbsp;=&nbsp;parent.frame(), sample_data&nbsp;=&nbsp;TRUE, quiet&nbsp;=&nbsp;FALSE)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>file</dt>
      <dd>string. path of the BUGS file which defines the stochastic
model. Alternatively, <code>file</code> can be a readable text-mode connection,
or a complete URL.</dd>
      <dt>data</dt>
      <dd>either a list or environment containing constants and
observed values or a character vector containing names of variables
existing in the workspace. Any numeric objects in <code>data</code> corresponding
to node arrays used in <code>file</code> are taken to represent the values of
observed nodes in the model.</dd>
      <dt>sample_data</dt>
      <dd>logical. Toggle the evaluation of the 'data' block of
the BUGS model that generates or transforms data. (default = <code>TRUE</code>).</dd>
      <dt>quiet</dt>
      <dd>logical. Deactivate verbosity. (default = <code>FALSE</code>).</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>

      <p><dl>
An object of class <code>biips</code> which can be used to generate samples
  from the posterior distribution of the parameters.</p>
  
      <p>An object of class <code>biips</code> is a list of functions that share a common
  environment. The functions can be used to query information on the model.
  <dt>ptr()</dt><dd>Get an external pointer to the compiled model object.</dd></p>
  
      <p><dt>file()</dt><dd>Get a string. filename of the BUGS model.</dd></p>
  
      <p><dt>data()</dt><dd>Get a named list of the original data of the model.</dd></p>
  
      <p><dt>model()</dt><dd>Get a character vector. BUGS language definition of the model.</dd></p>
  
      <p><dt>recompile()</dt><dd>Recompile the model using the original data set.</dd></p>
  
      <p></dl></p>
  
    </div>

    <div class="Description">
      <h2>Description</h2>

      <p>Create a biips model object described in BUGS language.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>modelfile &lt;- system.file(&#39;extdata&#39;, &#39;hmm.bug&#39;, package = &#39;Rbiips&#39;)
stopifnot(nchar(modelfile) &gt; 0)
cat(readLines(modelfile), sep = &#39;\n&#39;)
</div>
<div class='output'>var c_true[tmax], x_true[tmax], c[tmax], x[tmax], y[tmax]

data
{
  x_true[1] ~ dnorm(0, 1/5)
  y[1] ~ dnorm(x_true[1], exp(logtau_true))
  for (t in 2:tmax)
  {
    c_true[t] ~ dcat(p)
    x_true[t] ~ dnorm(0.5*x_true[t-1]+25*x_true[t-1]/(1+x_true[t-1]^2)+8*cos(1.2*(t-1)), ifelse(c_true[t]==1, 1/10, 1/100))
    y[t] ~ dnorm(x_true[t]/4, exp(logtau_true))
  }
}

model
{
  logtau ~ dunif(-3, 3)
  x[1] ~ dnorm(0, 1/5)
  y[1] ~ dnorm(x[1], exp(logtau))
  for (t in 2:tmax)
  {
    c[t] ~ dcat(p)
    x[t] ~ dnorm(0.5*x[t-1]+25*x[t-1]/(1+x[t-1]^2)+8*cos(1.2*(t-1)), ifelse(c[t]==1, 1/10, 1/100))
    y[t] ~ dnorm(x[t]/4, exp(logtau))
  }
}
</div>
<div class='input'>
data &lt;- list(tmax = 10, p = c(.5, .5), logtau_true = log(1), logtau = log(1))
model &lt;- biips_model(modelfile, data, sample_data = TRUE)
</div>
<div class='output'>* Parsing model in: /home/adrien-alea/workspace/biips-git/Rbiips/inst/extdata/hmm.bug
* Compiling data graph
  Declaring variables
  Resolving undeclared variables
  Allocating nodes
  Graph size: 169
  Sampling data
  Reading data back into data table
* Compiling model graph
  Declaring variables
  Resolving undeclared variables
  Allocating nodes
  Graph size: 180
</div>
<div class='input'>
## &lt;strong&gt;Not run&lt;/strong&gt;: 
# tmax &lt;- 10
# p &lt;- c(.5, .5)
# logtau_true &lt;- log(1)
# logtau &lt;- logtau_true
# 
# datanames &lt;- c(&#39;tmax&#39;, &#39;p&#39;, &#39;logtau_true&#39;, &#39;logtau&#39;)
# model &lt;- biips_model(modelfile, datanames, sample_data = TRUE)
# ## &lt;strong&gt;End(Not run)&lt;/strong&gt;

is.biips(model)
</div>
<div class='output'>[1] TRUE
</div>
<div class='input'>print(model)
</div>
<div class='output'>Biips model:

var c_true[tmax], x_true[tmax], c[tmax], x[tmax], y[tmax]

data
{
  x_true[1] ~ dnorm(0, 1/5)
  y[1] ~ dnorm(x_true[1], exp(logtau_true))
  for (t in 2:tmax)
  {
    c_true[t] ~ dcat(p)
    x_true[t] ~ dnorm(0.5*x_true[t-1]+25*x_true[t-1]/(1+x_true[t-1]^2)+8*cos(1.2*(t-1)), ifelse(c_true[t]==1, 1/10, 1/100))
    y[t] ~ dnorm(x_true[t]/4, exp(logtau_true))
  }
}

model
{
  logtau ~ dunif(-3, 3)
  x[1] ~ dnorm(0, 1/5)
  y[1] ~ dnorm(x[1], exp(logtau))
  for (t in 2:tmax)
  {
    c[t] ~ dcat(p)
    x[t] ~ dnorm(0.5*x[t-1]+25*x[t-1]/(1+x[t-1]^2)+8*cos(1.2*(t-1)), ifelse(c[t]==1, 1/10, 1/100))
    y[t] ~ dnorm(x[t]/4, exp(logtau))
  }
}


Fully observed variables:
 logtau logtau_true p tmax x_true y 

Partially observed variables:
 c_true 
</div>
<div class='input'>
model$data()
</div>
<div class='output'>$c_true
 [1] NA  2  2  1  1  2  2  2  2  1

$logtau
[1] 0

$logtau_true
[1] 0

$p
[1] 0.5 0.5

$tmax
[1] 10

$x_true
 [1]   0.3524253  15.1796907 -14.9339179 -10.1248878  -9.3018541 -10.2364000  -7.8380793 -26.2335748 -10.0988854 -10.0474440

$y
 [1] -0.03876895  5.04284774 -2.76636527 -2.56701084 -3.03157893 -0.81528349 -3.97082112 -5.45735316 -2.12056436 -3.10917527

</div>
<div class='input'>
variable.names(model)
</div>
<div class='output'>[1] &quot;c&quot;           &quot;c_true&quot;      &quot;logtau&quot;      &quot;logtau_true&quot; &quot;p&quot;           &quot;tmax&quot;        &quot;x&quot;           &quot;x_true&quot;      &quot;y&quot;          
</div>
<div class='input'>biips_variable_names(model)
</div>
<div class='output'>[1] &quot;c&quot;           &quot;c_true&quot;      &quot;logtau&quot;      &quot;logtau_true&quot; &quot;p&quot;           &quot;tmax&quot;        &quot;x&quot;           &quot;x_true&quot;      &quot;y&quot;          
</div>
<div class='input'>
biips_nodes(model)
</div>
<div class='output'>     id                                                          name  type observed discrete
1     0                                                     c_true[2] const     TRUE     TRUE
2     1                                                     c_true[3] const     TRUE     TRUE
3     2                                                     c_true[4] const     TRUE     TRUE
4     3                                                     c_true[5] const     TRUE     TRUE
5     4                                                     c_true[6] const     TRUE     TRUE
6     5                                                     c_true[7] const     TRUE     TRUE
7     6                                                     c_true[8] const     TRUE     TRUE
8     7                                                     c_true[9] const     TRUE     TRUE
9     8                                                    c_true[10] const     TRUE     TRUE
10    9                                                   logtau_true const     TRUE     TRUE
11   10                                                             p const     TRUE    FALSE
12   11                                                          tmax const     TRUE     TRUE
13   12                                                        x_true const     TRUE    FALSE
14   13                                                             3 const     TRUE     TRUE
15   14                                                          (-3) logic     TRUE     TRUE
16   15                                                        logtau stoch     TRUE    FALSE
17   21                                                 (exp(logtau)) logic     TRUE    FALSE
18   16                                                             0 const     TRUE     TRUE
19   17                                                             1 const     TRUE     TRUE
20   55                                                         (3-1) logic     TRUE     TRUE
21   18                                                             5 const     TRUE     TRUE
22   19                                                         (1/5) logic     TRUE    FALSE
23   87                                                         (5-1) logic     TRUE     TRUE
24   20                                                          x[1] stoch    FALSE    FALSE
25   22                                                          y[1] stoch     TRUE    FALSE
26   23                                                          c[2] stoch    FALSE     TRUE
27   39                                                     (c[2]==1) logic    FALSE     TRUE
28   24                                                           0.5 const     TRUE    FALSE
29   25                                                    (0.5*x[1]) logic    FALSE    FALSE
30   26                                                            25 const     TRUE     TRUE
31   27                                                     (25*x[1]) logic    FALSE    FALSE
32   28                                                             2 const     TRUE     TRUE
33   29                                                      (x[1]^2) logic    FALSE    FALSE
34   30                                                  (1+(x[1]^2)) logic    FALSE    FALSE
35   31                                      ((25*x[1])/(1+(x[1]^2))) logic    FALSE    FALSE
36   34                                                         (2-1) logic     TRUE     TRUE
37   32                                                             8 const     TRUE     TRUE
38  137                                                         (8-1) logic     TRUE     TRUE
39   33                                                           1.2 const     TRUE    FALSE
40   35                                                   (1.2*(2-1)) logic     TRUE    FALSE
41   36                                            (cos((1.2*(2-1)))) logic     TRUE    FALSE
42   37                                        (8*(cos((1.2*(2-1))))) logic     TRUE    FALSE
43   38  ((0.5*x[1])+((25*x[1])/(1+(x[1]^2)))+(8*(cos((1.2*(2-1)))))) logic    FALSE    FALSE
44   56                                                   (1.2*(3-1)) logic     TRUE    FALSE
45   57                                            (cos((1.2*(3-1)))) logic     TRUE    FALSE
46   58                                        (8*(cos((1.2*(3-1))))) logic     TRUE    FALSE
47   88                                                   (1.2*(5-1)) logic     TRUE    FALSE
48   89                                            (cos((1.2*(5-1)))) logic     TRUE    FALSE
49   90                                        (8*(cos((1.2*(5-1))))) logic     TRUE    FALSE
50  138                                                   (1.2*(8-1)) logic     TRUE    FALSE
51  139                                            (cos((1.2*(8-1)))) logic     TRUE    FALSE
52  140                                        (8*(cos((1.2*(8-1))))) logic     TRUE    FALSE
53   40                                                            10 const     TRUE     TRUE
54   41                                                        (1/10) logic     TRUE    FALSE
55  170                                                        (10-1) logic     TRUE     TRUE
56  171                                                  (1.2*(10-1)) logic     TRUE    FALSE
57  172                                           (cos((1.2*(10-1)))) logic     TRUE    FALSE
58  173                                       (8*(cos((1.2*(10-1))))) logic     TRUE    FALSE
59   42                                                           100 const     TRUE     TRUE
60   43                                                       (1/100) logic     TRUE    FALSE
61   44                            (ifelse((c[2]==1),(1/10),(1/100))) logic    FALSE    FALSE
62   45                                                          x[2] stoch    FALSE    FALSE
63   50                                                    (0.5*x[2]) logic    FALSE    FALSE
64   51                                                     (25*x[2]) logic    FALSE    FALSE
65   52                                                      (x[2]^2) logic    FALSE    FALSE
66   53                                                  (1+(x[2]^2)) logic    FALSE    FALSE
67   54                                      ((25*x[2])/(1+(x[2]^2))) logic    FALSE    FALSE
68   59  ((0.5*x[2])+((25*x[2])/(1+(x[2]^2)))+(8*(cos((1.2*(3-1)))))) logic    FALSE    FALSE
69   46                                                             4 const     TRUE     TRUE
70   47                                                      (x[2]/4) logic    FALSE    FALSE
71   48                                                          y[2] stoch     TRUE    FALSE
72   71                                                         (4-1) logic     TRUE     TRUE
73   72                                                   (1.2*(4-1)) logic     TRUE    FALSE
74   73                                            (cos((1.2*(4-1)))) logic     TRUE    FALSE
75   74                                        (8*(cos((1.2*(4-1))))) logic     TRUE    FALSE
76   49                                                          c[3] stoch    FALSE     TRUE
77   60                                                     (c[3]==1) logic    FALSE     TRUE
78   61                            (ifelse((c[3]==1),(1/10),(1/100))) logic    FALSE    FALSE
79   62                                                          x[3] stoch    FALSE    FALSE
80   63                                                      (x[3]/4) logic    FALSE    FALSE
81   64                                                          y[3] stoch     TRUE    FALSE
82   66                                                    (0.5*x[3]) logic    FALSE    FALSE
83   67                                                     (25*x[3]) logic    FALSE    FALSE
84   68                                                      (x[3]^2) logic    FALSE    FALSE
85   69                                                  (1+(x[3]^2)) logic    FALSE    FALSE
86   70                                      ((25*x[3])/(1+(x[3]^2))) logic    FALSE    FALSE
87   75  ((0.5*x[3])+((25*x[3])/(1+(x[3]^2)))+(8*(cos((1.2*(4-1)))))) logic    FALSE    FALSE
88   65                                                          c[4] stoch    FALSE     TRUE
89   76                                                     (c[4]==1) logic    FALSE     TRUE
90   77                            (ifelse((c[4]==1),(1/10),(1/100))) logic    FALSE    FALSE
91   78                                                          x[4] stoch    FALSE    FALSE
92   79                                                      (x[4]/4) logic    FALSE    FALSE
93   80                                                          y[4] stoch     TRUE    FALSE
94   82                                                    (0.5*x[4]) logic    FALSE    FALSE
95   83                                                     (25*x[4]) logic    FALSE    FALSE
96   84                                                      (x[4]^2) logic    FALSE    FALSE
97   85                                                  (1+(x[4]^2)) logic    FALSE    FALSE
98   86                                      ((25*x[4])/(1+(x[4]^2))) logic    FALSE    FALSE
99   91  ((0.5*x[4])+((25*x[4])/(1+(x[4]^2)))+(8*(cos((1.2*(5-1)))))) logic    FALSE    FALSE
100  81                                                          c[5] stoch    FALSE     TRUE
101  92                                                     (c[5]==1) logic    FALSE     TRUE
102  93                            (ifelse((c[5]==1),(1/10),(1/100))) logic    FALSE    FALSE
103  94                                                          x[5] stoch    FALSE    FALSE
104  95                                                      (x[5]/4) logic    FALSE    FALSE
105  96                                                          y[5] stoch     TRUE    FALSE
106  98                                                    (0.5*x[5]) logic    FALSE    FALSE
107  99                                                     (25*x[5]) logic    FALSE    FALSE
108 100                                                      (x[5]^2) logic    FALSE    FALSE
109 101                                                  (1+(x[5]^2)) logic    FALSE    FALSE
110 102                                      ((25*x[5])/(1+(x[5]^2))) logic    FALSE    FALSE
111  97                                                          c[6] stoch    FALSE     TRUE
112 109                                                     (c[6]==1) logic    FALSE     TRUE
113 110                            (ifelse((c[6]==1),(1/10),(1/100))) logic    FALSE    FALSE
114 103                                                             6 const     TRUE     TRUE
115 104                                                         (6-1) logic     TRUE     TRUE
116 105                                                   (1.2*(6-1)) logic     TRUE    FALSE
117 106                                            (cos((1.2*(6-1)))) logic     TRUE    FALSE
118 107                                        (8*(cos((1.2*(6-1))))) logic     TRUE    FALSE
119 108  ((0.5*x[5])+((25*x[5])/(1+(x[5]^2)))+(8*(cos((1.2*(6-1)))))) logic    FALSE    FALSE
120 111                                                          x[6] stoch    FALSE    FALSE
121 112                                                      (x[6]/4) logic    FALSE    FALSE
122 113                                                          y[6] stoch     TRUE    FALSE
123 115                                                    (0.5*x[6]) logic    FALSE    FALSE
124 116                                                     (25*x[6]) logic    FALSE    FALSE
125 117                                                      (x[6]^2) logic    FALSE    FALSE
126 118                                                  (1+(x[6]^2)) logic    FALSE    FALSE
127 119                                      ((25*x[6])/(1+(x[6]^2))) logic    FALSE    FALSE
128 114                                                          c[7] stoch    FALSE     TRUE
129 126                                                     (c[7]==1) logic    FALSE     TRUE
130 127                            (ifelse((c[7]==1),(1/10),(1/100))) logic    FALSE    FALSE
131 120                                                             7 const     TRUE     TRUE
132 121                                                         (7-1) logic     TRUE     TRUE
133 122                                                   (1.2*(7-1)) logic     TRUE    FALSE
134 123                                            (cos((1.2*(7-1)))) logic     TRUE    FALSE
135 124                                        (8*(cos((1.2*(7-1))))) logic     TRUE    FALSE
136 125  ((0.5*x[6])+((25*x[6])/(1+(x[6]^2)))+(8*(cos((1.2*(7-1)))))) logic    FALSE    FALSE
137 128                                                          x[7] stoch    FALSE    FALSE
138 129                                                      (x[7]/4) logic    FALSE    FALSE
139 130                                                          y[7] stoch     TRUE    FALSE
140 132                                                    (0.5*x[7]) logic    FALSE    FALSE
141 133                                                     (25*x[7]) logic    FALSE    FALSE
142 134                                                      (x[7]^2) logic    FALSE    FALSE
143 135                                                  (1+(x[7]^2)) logic    FALSE    FALSE
144 136                                      ((25*x[7])/(1+(x[7]^2))) logic    FALSE    FALSE
145 141  ((0.5*x[7])+((25*x[7])/(1+(x[7]^2)))+(8*(cos((1.2*(8-1)))))) logic    FALSE    FALSE
146 131                                                          c[8] stoch    FALSE     TRUE
147 142                                                     (c[8]==1) logic    FALSE     TRUE
148 143                            (ifelse((c[8]==1),(1/10),(1/100))) logic    FALSE    FALSE
149 144                                                          x[8] stoch    FALSE    FALSE
150 145                                                      (x[8]/4) logic    FALSE    FALSE
151 146                                                          y[8] stoch     TRUE    FALSE
152 148                                                    (0.5*x[8]) logic    FALSE    FALSE
153 149                                                     (25*x[8]) logic    FALSE    FALSE
154 150                                                      (x[8]^2) logic    FALSE    FALSE
155 151                                                  (1+(x[8]^2)) logic    FALSE    FALSE
156 152                                      ((25*x[8])/(1+(x[8]^2))) logic    FALSE    FALSE
157 147                                                          c[9] stoch    FALSE     TRUE
158 159                                                     (c[9]==1) logic    FALSE     TRUE
159 160                            (ifelse((c[9]==1),(1/10),(1/100))) logic    FALSE    FALSE
160 153                                                             9 const     TRUE     TRUE
161 154                                                         (9-1) logic     TRUE     TRUE
162 155                                                   (1.2*(9-1)) logic     TRUE    FALSE
163 156                                            (cos((1.2*(9-1)))) logic     TRUE    FALSE
164 157                                        (8*(cos((1.2*(9-1))))) logic     TRUE    FALSE
165 158  ((0.5*x[8])+((25*x[8])/(1+(x[8]^2)))+(8*(cos((1.2*(9-1)))))) logic    FALSE    FALSE
166 161                                                          x[9] stoch    FALSE    FALSE
167 162                                                      (x[9]/4) logic    FALSE    FALSE
168 163                                                          y[9] stoch     TRUE    FALSE
169 165                                                    (0.5*x[9]) logic    FALSE    FALSE
170 166                                                     (25*x[9]) logic    FALSE    FALSE
171 167                                                      (x[9]^2) logic    FALSE    FALSE
172 168                                                  (1+(x[9]^2)) logic    FALSE    FALSE
173 169                                      ((25*x[9])/(1+(x[9]^2))) logic    FALSE    FALSE
174 174 ((0.5*x[9])+((25*x[9])/(1+(x[9]^2)))+(8*(cos((1.2*(10-1)))))) logic    FALSE    FALSE
175 164                                                         c[10] stoch    FALSE     TRUE
176 175                                                    (c[10]==1) logic    FALSE     TRUE
177 176                           (ifelse((c[10]==1),(1/10),(1/100))) logic    FALSE    FALSE
178 177                                                         x[10] stoch    FALSE    FALSE
179 178                                                     (x[10]/4) logic    FALSE    FALSE
180 179                                                         y[10] stoch     TRUE    FALSE
</div>
<div class='input'>
## &lt;strong&gt;Not run&lt;/strong&gt;: 
# dotfile &lt;- &#39;hmm.dot&#39;
# biips_print_dot(model, dotfile)
# cat(readLines(dotfile), sep = &#39;\n&#39;)
# ## &lt;strong&gt;End(Not run)&lt;/strong&gt;
</div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>biips_model</li>
    </ul>
    <ul>
      <li>graphs</li><li>models</li>
    </ul> -->
      
    <h2>See also</h2>
    
<code><a href='biips-object.html'>biips_variable_names</a></code>, <code><a href='biips-object.html'>biips_nodes</a></code>,
  <code><a href='biips-object.html'>biips_print_dot</a></code>, <code><a href='extend-bugs.html'>biips_add_function</a></code>,
  <code><a href='extend-bugs.html'>biips_add_distribution</a></code>

        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>